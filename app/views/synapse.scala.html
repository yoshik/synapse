@()
<!DOCTYPE html>
<html>
  <head>
    <title>Synapse</title>
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
    <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
  </head>
  <body>


<input id="msg" type="text">
<input id="btn" type="button" value="send" onclick="onSend()">
<h2 id="room"></h2>

<script type="text/javascript">
function print(obj) {
    var properties = '';
    for (var prop in obj){
        properties += "[" + prop + "]<br>\n  " + obj[prop] + "<br><br>\n\n";
    }
    document.write(properties,obj);
}
</script>

<script>
function Synapse(url,receiveCallback) {
  if(!url){
    console.log("url is not found")
  } else {
    this.url = url
  }

  if ('WebSocket' in window) {
    this.websocket = new WebSocket(url)
  } else if ('MozWebSocket' in window) {
    this.websocket = new MozWebSocket(url)
  } else {
    console.log("WebSocket not supported")
  }
  var receive = receiveCallback;
  this.websocket.onmessage = function(event){
    receive(event.data);
  }

  window.onunload = function(){
    var code = 4500;
    var reason = "Disconnect";
    this.websocket.close(code,reason);
  }

}

</script>

<script>
  const url = "ws://localhost:9000/synapse/room";
  var SynapseRecieve = function (data){document.write(data);}
  var s = new Synapse(url,SynapseRecieve);

  var message = document.getElementById("msg");
  function onSend(){
    var send_data = {}
    send_data.message=message.value;
    send_data.kind="msg";
    s.websocket.send(JSON.stringify(send_data));
  }

</script>

<scr>


    </body>
</html>